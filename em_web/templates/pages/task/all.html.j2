{% extends "layout.html.j2" %}
{% block css %}
    {% assets "css_project" %}
        <link type="text/css" rel="stylesheet" href="{{ ASSET_URL }}" />
    {% endassets %}
{% endblock css %}
{% block js %}
    {% assets "js_project" %}
        <script type="text/javascript" src="{{ ASSET_URL }}" ></script>
    {% endassets %}
{% endblock js %}
{% block body %}
    <!-- page title -->
    <h1 class="em-title">
        All Tasks
        {% if mine %}- {{ mine }}{% endif %}
        {% if user_id %}
            (
            <a class="em-titleGrey" title="see tasks" href="/project/user/{{ user_id }}">
                See Projects
            </a>
            )
        {% endif %}
    </h1>
    <!-- owner cloud -->
    <div class="em-cloud">
        {% for owner in owners %}
            <div class="em-cloudItem">
                <a class="em-cloudName" href="/task/user/{{ owner[1] }}" title="open {{ owner[0] }}'s tasks">
                    {{ owner[0] }}
                </a>
                <span class="em-cloudValue">{{ owner[2] }}</span>
            </div>
        {% endfor %}
    </div>
    <!-- project cloud -->
    <div class="em-cloud">
        {% for project in projects %}
            <div class="em-cloudItem">
                <a class="em-cloudName" href="/project/{{ project[1] }}" title="open {{ project[0] }}">
                    {{ project[0] }}
                </a>
                <span class="em-cloudValue">{{ project[2] }}</span>
            </div>
        {% endfor %}
    </div>
    <!-- ajax table -->
    <div class="em-ajaxTable"
         data-theme="Exec"
         data-src="/table/tasks/{% if user_id %}{{ user_id }}{% elif mine %}mine{% else %}all{% endif %}/list">
        <div class="loader">
            <img src="/static/img/loader.gif" alt="loading..." title="loading image" />
        </div>
    </div>
{% endblock body %}
